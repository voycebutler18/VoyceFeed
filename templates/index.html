<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Social Media Analyzer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { 
            font-family: 'Inter', sans-serif;
            background-color: #0f172a; /* slate-900 */
        }
        .glass-pane {
            background: rgba(30, 41, 59, 0.5);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(51, 65, 85, 0.5);
        }
        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: #3b82f6; /* blue-500 */
            width: 40px;
            height: 40px;
            animation: spin 1s ease-in-out infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-slate-300">

    <div class="container mx-auto p-4 sm:p-6 lg:p-8">
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-black text-white">AI Profile Analyzer</h1>
            <p class="text-slate-400 mt-2">Get a strategic plan from GPT-4 to make your profile go viral.</p>
        </header>

        <!-- Main Grid -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Input Section -->
            <div class="glass-pane p-6 rounded-2xl">
                <h2 class="text-2xl font-bold text-white mb-4">1. Input Your Profile</h2>
                
                <div class="mb-4">
                    <label for="profile-url" class="block text-sm font-medium text-slate-300 mb-2">Paste your Facebook Profile URL here:</label>
                    <input type="text" id="profile-url" class="w-full p-3 bg-slate-900/50 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none" placeholder="https://www.facebook.com/your.profile">
                </div>

                <div class="mb-6">
                    <label for="openai-key" class="block text-sm font-medium text-slate-300 mb-2">Your OpenAI API Key:</label>
                    <input type="password" id="openai-key" class="w-full p-3 bg-slate-900/50 rounded-lg border border-slate-600 focus:border-blue-500 focus:outline-none" placeholder="sk-...">
                </div>

                <button id="analyze-button" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg transition-colors flex items-center justify-center disabled:bg-slate-600">
                    <svg class="w-5 h-5 mr-2" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09z" /></svg>
                    Analyze My Profile
                </button>
            </div>

            <!-- Output Section -->
            <div class="glass-pane p-6 rounded-2xl">
                <h2 class="text-2xl font-bold text-white mb-4">2. AI Strategic Plan</h2>
                <div id="analysis-output" class="space-y-6">
                    <!-- Loading Spinner -->
                    <div id="loading-spinner" class="hidden flex-col items-center justify-center h-full text-center py-10">
                        <div class="spinner"></div>
                        <p class="mt-4 text-slate-400">AI is generating your growth strategy...</p>
                    </div>
                    <!-- Placeholder -->
                    <div id="placeholder-text" class="text-center py-10">
                        <p class="text-slate-500">Your strategic analysis will appear here.</p>
                    </div>
                    <!-- Results -->
                    <div id="results" class="hidden prose prose-invert prose-slate max-w-none">
                        <!-- AI content will be injected here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // We will use a library to parse markdown safely
        const markdownScript = document.createElement('script');
        markdownScript.src = "https://cdn.jsdelivr.net/npm/marked/marked.min.js";
        document.head.appendChild(markdownScript);

        const analyzeButton = document.getElementById('analyze-button');
        const profileUrlInput = document.getElementById('profile-url');
        const openAiKeyInput = document.getElementById('openai-key');
        const analysisOutput = document.getElementById('analysis-output');
        const loadingSpinner = document.getElementById('loading-spinner');
        const placeholderText = document.getElementById('placeholder-text');
        const resultsDiv = document.getElementById('results');

        analyzeButton.addEventListener('click', async () => {
            const profileUrl = profileUrlInput.value.trim();
            const apiKey = openAiKeyInput.value.trim();

            if (!profileUrl || !apiKey) {
                alert('Please provide both your profile URL and your OpenAI API key.');
                return;
            }

            // Show loading state
            placeholderText.classList.add('hidden');
            resultsDiv.classList.add('hidden');
            loadingSpinner.classList.remove('hidden');
            analyzeButton.disabled = true;

            const prompt = `
                As an expert social media strategist, create a comprehensive growth plan for a personal Facebook profile. The user's profile URL is: ${profileUrl}.

                Even though you cannot see the page's live content, provide a detailed, actionable strategy based on established principles for viral growth. The user wants to know what they're doing wrong and how to improve.

                Structure your response in markdown format with the following sections:

                ###  प्रोफाइल पिक्चर और बैनर
                एक बेहतरीन प्रोफ़ाइल पिक्चर और कवर फ़ोटो के लिए क्या ज़रूरी है, इस पर सलाह दें।

                ### बायो ऑप्टिमाइज़ेशन
                एक आकर्षक बायो बनाने के लिए सुझाव दें जो लोगों को फॉलो करने के लिए प्रोत्साहित करे।

                ### कंटेंट रणनीति
                3-5 प्रमुख "कंटेंट पिलर्स" (विषय) सुझाएं जिन पर उपयोगकर्ता को ध्यान केंद्रित करना चाहिए। प्रत्येक पिलर के लिए पोस्ट के 2-3 उदाहरण दें।

                ### वायरल होने की रणनीति
                 जुड़ाव बढ़ाने के लिए 3 विशिष्ट, कार्रवाई योग्य रणनीतियाँ प्रदान करें (उदाहरण के लिए, आकर्षक प्रश्न पूछना, पोल का उपयोग करना, ट्रेंडिंग ऑडियो का उपयोग करना)।

                ### पोस्टिंग शेड्यूल
                अधिकतम पहुंच के लिए पोस्ट करने के लिए सबसे अच्छे दिन और समय की सिफारिश करें।
            `;

            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4o',
                        messages: [{ role: 'user', content: prompt }],
                        temperature: 0.7
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error.message || 'Failed to get a response from OpenAI.');
                }

                const data = await response.json();
                const analysisText = data.choices[0].message.content;

                // Use the 'marked' library to convert markdown to HTML
                resultsDiv.innerHTML = marked.parse(analysisText);
                resultsDiv.classList.remove('hidden');

            } catch (error) {
                resultsDiv.innerHTML = `<p class="text-red-400">Error: ${error.message}</p>`;
                resultsDiv.classList.remove('hidden');
            } finally {
                // Hide loading state
                loadingSpinner.classList.add('hidden');
                analyzeButton.disabled = false;
            }
        });
    </script>
</body>
</html>
